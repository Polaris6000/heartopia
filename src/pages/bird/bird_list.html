<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>ì¡°ë¥˜ ë„ê° - ë‘ê·¼ë‘ê·¼íƒ€ìš´</title>
    <link href="../../css/common.css" rel="stylesheet">
</head>
<body>
<div id="header-placeholder"></div>

<main>
    <div class="page-header">
        <nav>
            <ul>
                <li><a href="bird_finder.html">ìƒˆ ì°¾ê¸°</a></li>
            </ul>
        </nav>
        <h1>ğŸ¦ ì¡°ë¥˜ ë„ê°</h1>
        <p>ë‘ê·¼ë‘ê·¼íƒ€ìš´ì˜ ëª¨ë“  ìƒˆ ì •ë³´ë¥¼ í™•ì¸í•˜ì„¸ìš”</p>
    </div>

    <div class="stats" id="stats">
        <div class="stat-card">
            <div class="number">-</div>
            <div class="label">ì´ ìƒˆ ì¢…ë¥˜</div>
        </div>
        <div class="stat-card">
            <div class="number">-</div>
            <div class="label">ì„œì‹ì§€ ì¢…ë¥˜</div>
        </div>
        <div class="stat-card">
            <div class="number">-</div>
            <div class="label">ìµœê³  íŒë§¤ê°€</div>
        </div>
    </div>

    <div class="filter-section">
        <h2>ğŸ” í•„í„°</h2>

        <div class="search-box">
            <label for="birdSearch">ğŸ¦ ìƒˆ ì´ë¦„ ê²€ìƒ‰</label>
            <input id="birdSearch" oninput="applyFilters()" placeholder="ì˜ˆ: ë¹„ë‘˜ê¸°, ì•µë¬´, í™í•™..." type="text">
        </div>

        <div class="filter-groups">
            <div class="filter-group">
                <h3>â° ì¶œí˜„ ì‹œê°„</h3>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ì•„ì¹¨"> ğŸŒ… ì•„ì¹¨
                    </label>
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ë‚®"> â˜€ï¸ ë‚®
                    </label>
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ì €ë…"> ğŸŒ‡ ì €ë…
                    </label>
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ìƒˆë²½"> ğŸŒ™ ìƒˆë²½
                    </label>
                </div>
            </div>

            <div class="filter-group">
                <h3>ğŸŒ¤ï¸ í¬í•¨í•  ë‚ ì”¨</h3>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ë§‘ìŒ"> â˜€ï¸ ë§‘ìŒ
                    </label>
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ë¹„"> ğŸŒ§ï¸ ë¹„
                    </label>
                    <label class="checkbox-label">
                        <input onchange="applyFilters()" type="checkbox" value="ë¬´ì§€ê°œ"> ğŸŒˆ ë¬´ì§€ê°œ
                    </label>
                </div>
            </div>

            <div class="filter-group">
                <h3>ğŸ”’ ì „ìš© ë‚ ì”¨</h3>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input id="sunnyOnly" onchange="applyFilters()" type="checkbox"> â˜€ï¸ ë§‘ìŒì—ë§Œ ë“±ì¥
                    </label>
                    <label class="checkbox-label">
                        <input id="rainyOnly" onchange="applyFilters()" type="checkbox"> ğŸŒ§ï¸ ë¹„ì—ë§Œ ë“±ì¥
                    </label>
                    <label class="checkbox-label">
                        <input id="rainbowOnly" onchange="applyFilters()" type="checkbox"> ğŸŒˆ ë¬´ì§€ê°œì—ë§Œ ë“±ì¥
                    </label>
                </div>
            </div>

            <div class="filter-actions">
                <button class="filter-btn winter-season-btn" onclick="loadSeasonData('winter_bird.json')">â„ï¸ ë¹™ì„¤ ì‹œì¦Œ ì¶”ê°€</button>
                <button class="filter-btn-reset winter-season-btn" onclick="removeSeasonData()">ğŸ—‘ï¸ ì‹œì¦Œ ë°ì´í„° ì œê±°</button>
                <button class="filter-btn" onclick="selectAllTime()">ì‹œê°„ ì „ì²´ì„ íƒ</button>
                <button class="filter-btn" onclick="selectAllWeather()">ë‚ ì”¨ ì „ì²´ì„ íƒ</button>
                <button class="filter-btn-reset" onclick="resetFilters()">í•„í„° ì´ˆê¸°í™”</button>
            </div>
        </div>
    </div>

    <div class="habitat-section" id="content">
        <div class="loading">ğŸ¦ ìƒˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    </div>
</main>

<div id="footer-placeholder"></div>

<script src="../../js/common.js"></script>

<script>
    /** @type {Array<Object>} ë¡œë“œëœ ìƒˆ ë°ì´í„° ë°°ì—´ */
    let birdData = [];

    /** @type {{column: string, order: string}} í˜„ì¬ ì •ë ¬ ê¸°ì¤€ */
    let currentSort = {column: 'price', order: 'desc'};

    /** @type {Set<string>} ë¡œë“œëœ ì‹œì¦Œ íŒŒì¼ëª… ì§‘í•© (ì¤‘ë³µ ë°©ì§€) */
    let loadedSeasons = new Set();

    /**
     * ë“±ê¸‰(ì„±)ë³„ íŒë§¤ê°€ ë°°ìœ¨ í…Œì´ë¸”
     * JSONì˜ price ê°’ì€ 3ì„± ê¸°ì¤€ â†’ 3ì„± ë°°ìœ¨ì„ 1ë¡œ ì„¤ì •
     * 1ì„±: 12.5%  2ì„±: 50%  3ì„±: 100%(ê¸°ì¤€)  4ì„±: 200%  5ì„±: 400%
     */
    const starMultipliers = {
        1: 0.125,
        2: 0.5,
        3: 1,
        4: 2,
        5: 4
    };

    /** ì‹œê°„ëŒ€ ì´ëª¨ì§€ ë§µ */
    // const timeIcons    = { 'ì•„ì¹¨': 'ğŸŒ…', 'ë‚®': 'â˜€ï¸', 'ì €ë…': 'ğŸŒ†', 'ìƒˆë²½': 'ğŸŒ™' };
    /** ë‚ ì”¨ ì´ëª¨ì§€ ë§µ */
    const weatherIcons = { 'ë§‘ìŒ': 'â˜€ï¸', 'ë¹„': 'ğŸŒ§ï¸', 'ë¬´ì§€ê°œ': 'ğŸŒˆ' };

    async function loadbirdData() {
        try {
            let response = await fetch('../../data/bird_data.json');

            if (!response.ok) {
                response = await fetch('./bird_data.json');
            }

            if (!response.ok) {
                throw new Error('bird_data.json íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            birdData = await response.json();
            console.log('ìƒˆ ë°ì´í„° ë¡œë“œ ì„±ê³µ:', birdData.length + 'ì¢…');
            displayStats();
            displayAllbirds();
        } catch (error) {
            console.error('ë°ì´í„° ë¡œë“œ ì—ëŸ¬:', error);
            document.getElementById('content').innerHTML =
                `<div class="error">âŒ ë°ì´í„° íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</div>`;
        }
    }

    async function loadSeasonData(filename) {
        if (loadedSeasons.has(filename)) {
            alert('ì´ë¯¸ ì¶”ê°€ëœ ì‹œì¦Œì…ë‹ˆë‹¤.');
            return;
        }

        try {
            let response = await fetch(`../../data/${filename}`);

            if (!response.ok) {
                response = await fetch(`./${filename}`);
            }

            if (!response.ok) {
                throw new Error(`${filename} íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
            }

            const seasonData = await response.json();

            // ì´ë¦„ ê¸°ì¤€ ì¤‘ë³µ ì œê±°í•˜ë©° ë³‘í•©
            const combined = [...birdData, ...seasonData];
            birdData = combined.filter((bird, index, self) =>
                index === self.findIndex((b) => b.name === bird.name)
            );

            loadedSeasons.add(filename);

            alert(`${seasonData.length}ì¢…ì˜ ì‹œì¦Œ ë°ì´í„°ê°€ ë³‘í•©ë˜ì—ˆìŠµë‹ˆë‹¤.\n(ì´ ${birdData.length}ì¢…)`);
            displayStats();
            displayAllbirds();
        } catch (error) {
            console.error('ì‹œì¦Œ ë°ì´í„° ë¡œë“œ ì—ëŸ¬:', error);
            alert(`ì‹œì¦Œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.\n${error.message}`);
        }
    }

    async function removeSeasonData() {
        if (loadedSeasons.size === 0) {
            alert('ì œê±°í•  ì‹œì¦Œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        try {
            let response = await fetch('../../data/bird_data.json');
            if (!response.ok) {
                response = await fetch('./bird_data.json');
            }

            if (!response.ok) {
                throw new Error('bird_data.json íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            }

            birdData = await response.json();
            loadedSeasons.clear();

            alert('ëª¨ë“  ì‹œì¦Œ ë°ì´í„°ê°€ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.\nê¸°ë³¸ ë°ì´í„°ë§Œ í‘œì‹œë©ë‹ˆë‹¤.');
            displayStats();
            displayAllbirds();
        } catch (error) {
            console.error('ë°ì´í„° ì´ˆê¸°í™” ì—ëŸ¬:', error);
            alert('ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
        }
    }

    function getSelectedFilters() {
        const timeCheckboxes = document.querySelectorAll('.filter-group:nth-child(1) input[type="checkbox"]:checked');
        const weatherCheckboxes = document.querySelectorAll('.filter-group:nth-child(2) input[type="checkbox"]:checked');
        const rainbowOnly = document.getElementById('rainbowOnly')?.checked || false;
        const sunnyOnly = document.getElementById('sunnyOnly')?.checked || false;
        const rainyOnly = document.getElementById('rainyOnly')?.checked || false;
        const searchText = document.getElementById('birdSearch')?.value.trim().toLowerCase() || '';

        return {
            times: Array.from(timeCheckboxes).map(cb => cb.value),
            weathers: Array.from(weatherCheckboxes).map(cb => cb.value),
            rainbowOnly: rainbowOnly,
            sunnyOnly: sunnyOnly,
            rainyOnly: rainyOnly,
            searchText: searchText
        };
    }

    function applyFilters() {
        displayAllbirds();
    }

    function selectAllTime() {
        const checkboxes = document.querySelectorAll('.filter-group:nth-child(1) input[type="checkbox"]');
        checkboxes.forEach(cb => cb.checked = true);
        applyFilters();
    }

    function selectAllWeather() {
        const checkboxes = document.querySelectorAll('.filter-group:nth-child(2) input[type="checkbox"]');
        checkboxes.forEach(cb => {
            if (!cb.id.includes('Only')) {
                cb.checked = true;
            }
        });
        applyFilters();
    }

    function resetFilters() {
        const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
        allCheckboxes.forEach(cb => cb.checked = false);
        document.getElementById('birdSearch').value = '';
        applyFilters();
    }

    function displayStats() {
        const totalbirds = birdData.length;
        const habitats = [...new Set(birdData.map(b => b.habitat))].length;
        const maxPrice = Math.max(...birdData.map(b => b.price));

        const statsHTML = `
            <div class="stat-card">
                <div class="number">${totalbirds}</div>
                <div class="label">ì´ ìƒˆ ì¢…ë¥˜</div>
            </div>
            <div class="stat-card">
                <div class="number">${habitats}</div>
                <div class="label">ì„œì‹ì§€ ì¢…ë¥˜</div>
            </div>
            <div class="stat-card">
                <div class="number">â‚©${maxPrice}</div>
                <div class="label">ìµœê³  íŒë§¤ê°€</div>
            </div>
        `;
        document.getElementById('stats').innerHTML = statsHTML;
    }

    /**
     * ìƒˆ ë°°ì—´ì„ ì§€ì • ì—´Â·ë°©í–¥ìœ¼ë¡œ ì •ë ¬ (ì›ë³¸ ë¶ˆë³€)
     * preening/wingspreadëŠ” ì´ ì¡°ê±´ ìˆ˜ ê¸°ì¤€ ì •ë ¬ (ì¡°ê±´ ë§ì€ ê²ƒ ìš°ì„ )
     *
     * @param {Array<Object>} birds
     * @param {string} column - 'name'|'habitat'|'level'|'price'|'preening'|'wingspread'
     * @param {string} order  - 'asc'|'desc'
     * @returns {Array<Object>}
     */
    function sortbirds(birds, column, order) {
        return [...birds].sort((a, b) => {
            let valueA, valueB;

            if (column === 'name' || column === 'habitat') {
                valueA = column === 'name' ? a.name : a.habitat;
                valueB = column === 'name' ? b.name : b.habitat;
                return order === 'asc'
                    ? valueA.localeCompare(valueB, 'ko')
                    : valueB.localeCompare(valueA, 'ko');
            } else if (column === 'level') {
                valueA = a.level;
                valueB = b.level;
            } else if (column === 'price') {
                valueA = a.price;
                valueB = b.price;
            } else if (column === 'preening') {
                // ì´ (ì‹œê°„, ë‚ ì”¨) ìŒì˜ ìˆ˜ë¡œ ì •ë ¬, nullì€ -1
                valueA = getMotionTotalCount(a.motion_preening);
                valueB = getMotionTotalCount(b.motion_preening);
            } else if (column === 'wingspread') {
                valueA = getMotionTotalCount(a.motion_wingspread);
                valueB = getMotionTotalCount(b.motion_wingspread);
            }

            return order === 'asc' ? valueA - valueB : valueB - valueA;
        });
    }

    function handleSort(column) {
        if (currentSort.column === column) {
            currentSort.order = currentSort.order === 'asc' ? 'desc' : 'asc';
        } else {
            currentSort.column = column;
            currentSort.order = 'asc';
        }
        displayAllbirds();
    }

    function updatePrice(birdName, basePrice, selectElement) {
        const star = parseInt(selectElement.value);
        const multiplier = starMultipliers[star];
        const calculatedPrice = Math.floor(basePrice * multiplier);

        const priceSpan = selectElement.parentElement.querySelector('.price');
        priceSpan.textContent = `â‚©${calculatedPrice}`;
    }

    function displayAllbirds() {
        const filters = getSelectedFilters();
        let filteredbirds = birdData;

        // ì´ë¦„ ê²€ìƒ‰ í•„í„°
        if (filters.searchText) {
            filteredbirds = filteredbirds.filter(bird => {
                return bird.name.toLowerCase().includes(filters.searchText);
            });
        }

        // ì‹œê°„ í•„í„°
        if (filters.times.length > 0) {
            filteredbirds = filteredbirds.filter(bird => {
                if (!bird.time || bird.time.length === 0) return false;
                return bird.time.some(t => filters.times.includes(t));
            });
        }

        // ë‚ ì”¨ í•„í„° ë¡œì§
        if (filters.rainbowOnly) {
            filteredbirds = filteredbirds.filter(bird => {
                if (!bird.weather || bird.weather.length === 0) return false;
                return bird.weather.length === 1 && bird.weather[0] === "ë¬´ì§€ê°œ";
            });
        } else if (filters.sunnyOnly) {
            filteredbirds = filteredbirds.filter(bird => {
                if (!bird.weather || bird.weather.length === 0) return false;
                return bird.weather.includes("ë§‘ìŒ") && !bird.weather.includes("ë¹„");
            });
        } else if (filters.rainyOnly) {
            filteredbirds = filteredbirds.filter(bird => {
                if (!bird.weather || bird.weather.length === 0) return false;
                return bird.weather.includes("ë¹„") && !bird.weather.includes("ë§‘ìŒ");
            });
        } else if (filters.weathers.length > 0) {
            filteredbirds = filteredbirds.filter(bird => {
                if (!bird.weather || bird.weather.length === 0) return false;
                return bird.weather.some(w => filters.weathers.includes(w));
            });
        }

        const sortedbirds = sortbirds(filteredbirds, currentSort.column, currentSort.order);

        let html = `
            <div class="habitat-group">
                <div class="habitat-header">
                    <span>ì „ì²´ ìƒˆ ëª©ë¡</span>
                    <span class="count-badge">${sortedbirds.length}ì¢…</span>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th class="sortable ${currentSort.column === 'name' ? 'sort-' + currentSort.order : ''}"
                                    onclick="handleSort('name')">ì´ë¦„</th>
                                <th class="sortable ${currentSort.column === 'habitat' ? 'sort-' + currentSort.order : ''}"
                                    onclick="handleSort('habitat')">ì„œì‹ì§€</th>
                                <th class="sortable col-level ${currentSort.column === 'level' ? 'sort-' + currentSort.order : ''}"
                                    onclick="handleSort('level')">ë ˆë²¨</th>
                                <th class="sortable ${currentSort.column === 'price' ? 'sort-' + currentSort.order : ''}"
                                    onclick="handleSort('price')">íŒë§¤ê°€</th>
                                <th class="col-time">ì¶œí˜„ ì‹œê°„</th>
                                <th class="col-weather">ë‚ ì”¨ ì¡°ê±´</th>
                                <th class="sortable ${currentSort.column === 'preening' ? 'sort-' + currentSort.order : ''}"
                                    onclick="handleSort('preening')" title="ì¡°ê±´ ìˆ˜ ê¸°ì¤€ ì •ë ¬">3â­ ê¹ƒí„¸ ë‹¤ë“¬ê¸°</th>
                                <th class="sortable ${currentSort.column === 'wingspread' ? 'sort-' + currentSort.order : ''}"
                                    onclick="handleSort('wingspread')" title="ì¡°ê±´ ìˆ˜ ê¸°ì¤€ ì •ë ¬">4â­ ë‚ ê°œ í¼ì¹˜ê¸°</th>
                            </tr>
                        </thead>
                        <tbody>
        `;

        sortedbirds.forEach(bird => {
            // ì‹œê°„ í‘œì‹œ ë¡œì§
            const allTimes = ['ì•„ì¹¨', 'ë‚®', 'ì €ë…', 'ìƒˆë²½'];
            const isAlwaysTime = bird.timeAll || (bird.time && allTimes.every(t => bird.time.includes(t)));
            const timeDisplay = isAlwaysTime
                ? '<span class="time-badge always">ì¢…ì¼</span>'
                : bird.time.map(t => `<span class="time-badge">${t}</span>`).join(' ');

            // ë‚ ì”¨ í‘œì‹œ ë¡œì§
            const allWeathers = ['ë§‘ìŒ', 'ë¹„', 'ë¬´ì§€ê°œ'];
            const isAlwaysWeather = bird.weatherAll || (bird.weather && allWeathers.every(w => bird.weather.includes(w)));
            const weatherDisplay = isAlwaysWeather
                ? '<span class="weather-badge always">í•­ìƒ</span>'
                : bird.weather.map(w => `<span class="weather-badge">${w}</span>`).join(' ');

            html += `
            <tr>
                <td class="item-name">${getSpecialIcon(bird.special)}${bird.name}</td>
                <td>${getHabitatIcon(bird.habitat)} ${bird.habitat}</td>
                <td><span class="level-badge">Lv.${bird.level}</span></td>
                <td><div class="price-cell">
                    <span>â­</span>
                    <!-- 3ì„±ì´ JSON price ê¸°ì¤€ê°’ì´ë¯€ë¡œ selectedë¥¼ 3ì„±ìœ¼ë¡œ ì„¤ì • -->
                    <select class="star-selector" onchange="updatePrice('${bird.name}', ${bird.price}, this)">
                        <option value="1">1ì„±</option>
                        <option value="2">2ì„±</option>
                        <option value="3" selected>3ì„±</option>
                        <option value="4">4ì„±</option>
                        <option value="5">5ì„±</option>
                    </select>
                    <!-- ì´ˆê¸° í‘œì‹œ: bird.price = 3ì„± ê¸°ì¤€ê°’ (ë°°ìœ¨ 1 ì ìš©) -->
                    <span class="price">â‚©${bird.price}</span>
                </div></td>
                <td>${timeDisplay}</td>
                <td>${weatherDisplay}</td>
                <td class="motion-cell">${formatMotion(bird.motion_preening)}</td>
                <td class="motion-cell">${formatMotion(bird.motion_wingspread)}</td>
            </tr>
        `;
        });

        html += `
                        </tbody>
                    </table>
                </div>
            </div>
        `;

        document.getElementById('content').innerHTML = html;
    }

    /**
     * special ê°’ì— ë”°ë¥¸ ì•„ì´ì½˜ ë°˜í™˜
     * JSON ì‹¤ì œ ê°’: false | "íŠ¹ìˆ˜" | "ë³´ë„ˆìŠ¤ ìŠ¤í…Œì´ì§€" | "í¬ê·€" | "ë¹™ì„¤ ì‹œì¦Œ"
     */
    function getSpecialIcon(special) {
        const icons = {
            'íŠ¹ìˆ˜': 'ğŸŒŸ',
            'ë³´ë„ˆìŠ¤ ìŠ¤í…Œì´ì§€': 'ğŸ',
            'í¬ê·€': 'ğŸ’',
            'ë¹™ì„¤ ì‹œì¦Œ': 'â„ï¸'
        };
        return icons[special] || '';
    }

    /**
     * ì´ë²¤íŠ¸ì„± ì„œì‹ì§€ì— ì•„ì´ì½˜ ë¶€ì—¬
     */
    function getHabitatIcon(habitat) {
        const icons = {
            'ìƒˆë“¤ì˜ ë³µê·€ ì‚¬ê±´': 'ğŸ¯',
            'ê²¨ìš¸ ê¸°ë¡ ì±„ì§‘ ì‚¬ê±´': 'â„ï¸'
        };
        return icons[habitat] || '';
    }

    /**
     * motion ê°ì²´ë¥¼ HTML ë±ƒì§€ ë¬¸ìì—´ë¡œ ë³€í™˜ (listìš© - í•˜ì´ë¼ì´íŠ¸ ì—†ìŒ)
     *
     * @param {Object|null} motionObj - { ì‹œê°„: [ë‚ ì”¨, ...], ... } í˜•íƒœ ë˜ëŠ” null
     * @returns {string} HTML ë¬¸ìì—´
     */
    function formatMotion(motionObj) {
        if (!motionObj) return '<span class="motion-none">-</span>';

        const entries = Object.entries(motionObj);
        if (entries.length === 0) return '<span class="motion-none">-</span>';

        return entries.map(([time, weathers]) => {
            const weatherStr = weathers.map(w => `${weatherIcons[w] || ''}${w}`).join(' ');
            return `<span class="motion-badge">${time} Â· ${weatherStr}</span>`;
        }).join('');
    }

    /**
     * ì •ë ¬ìš© motion ì´ ì¡°ê±´ ìˆ˜ ë°˜í™˜ (list ì „ìš©)
     * nullì´ë©´ -1ì„ ë°˜í™˜í•˜ì—¬ ì •ë ¬ ì‹œ ë§¨ ë’¤ë¡œ ì´ë™
     *
     * @param {Object|null} motionObj
     * @returns {number}
     */
    function getMotionTotalCount(motionObj) {
        if (!motionObj) return -1;
        // ê° ì‹œê°„ëŒ€ì˜ ë‚ ì”¨ ë°°ì—´ ê¸¸ì´ í•©ì‚°
        return Object.values(motionObj).reduce((sum, arr) => sum + arr.length, 0);
    }

    window.onload = loadbirdData;
</script>
</body>
</html>